<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DDS iCard</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

  <!-- Pro CSS -->
  <link rel="stylesheet" href="css/pro.css" />
</head>

<body>

<main class="ic-main">
  <div class="container">
    <div class="ic-center">

      <!-- Card -->
      <section class="ic-card shadow-lg border-0">

        <!-- Company Identity Header -->
        <div class="ic-company-top">
          <div class="ic-company-logo-circle">
            <img src="assets/images/logo/logo4.png" alt="DDS Engineering Solutions LLP Logo">
          </div>
          <div class="ic-company-name">
            DDS Engineering (INDIA) Pvt. Ltd.
          </div>
        </div>

        <!-- HERO -->
        <div class="ic-hero">

          <!-- Avatar -->
          <div class="ic-avatar-wrap">
            <div class="ic-avatar-ring">
              <img id="photo" src="" alt="Profile Photo">
            </div>
          </div>

          <!-- Name + Role -->
          <div class="ic-title text-center">
            <h1 id="name" class="ic-name">Loading…</h1>
            <div id="designation" class="ic-role">—</div>
          </div>

          <!-- Floating Actions (icons only) -->
        </div>

        <!-- Body -->
        <div class="ic-body">

          <!-- ✅ CONTACT DETAILS (Phone / Email / Website / Location) -->
          <div class="ic-panel mt-3">
            <div class="ic-panel-title mb-2">Contact Details</div>

            <div class="list-group list-group-flush">

              <!-- Phone -->
              <a id="aPhone" href="#" class="list-group-item d-flex align-items-center justify-content-between py-3">
                <div class="d-flex align-items-center gap-3">
                  <i class="bi bi-telephone-fill fs-5"></i>
                  <div>
                    <div class="small text-muted">Phone</div>
                    <div id="dPhone" class="fw-semibold">—</div>
                  </div>
                </div>
                <i class="bi bi-chevron-right"></i>
              </a>

              <!-- Email -->
              <a id="aEmail" href="#" class="list-group-item d-flex align-items-center justify-content-between py-3">
                <div class="d-flex align-items-center gap-3">
                  <i class="bi bi-envelope-fill fs-5"></i>
                  <div>
                    <div class="small text-muted">Email</div>
                    <div id="dEmail" class="fw-semibold">—</div>
                  </div>
                </div>
                <i class="bi bi-chevron-right"></i>
              </a>

              <!-- Website -->
              <a id="aWeb" href="#" target="_blank" rel="noopener"
                 class="list-group-item d-flex align-items-center justify-content-between py-3">
                <div class="d-flex align-items-center gap-3">
                  <i class="bi bi-globe2 fs-5"></i>
                  <div>
                    <div class="small text-muted">Website</div>
                    <div id="dWebsite" class="fw-semibold">—</div>
                  </div>
                </div>
                <i class="bi bi-box-arrow-up-right"></i>
              </a>

              <!-- Location -->
              <a id="aLoc" href="#" target="_blank" rel="noopener"
                 class="list-group-item d-flex align-items-center justify-content-between py-3">
                <div class="d-flex align-items-center gap-3">
                  <i class="bi bi-geo-alt-fill fs-5"></i>
                  <div>
                    <div class="small text-muted">Location</div>
                    <div id="dAddress" class="fw-semibold">—</div>
                  </div>
                </div>
                <i class="bi bi-box-arrow-up-right"></i>
              </a>

            </div>
          </div>

          <!-- ✅ ABOUT SECTION -->
          <div class="ic-panel mt-3">
            <div class="ic-panel-title mb-3">Company Profile</div>

            <div class="ic-panel-text">
              <p>
                <strong>DDS Engineering Solutions LLP (DDS)</strong> is a multi-dimensional,
                technical, and detailed engineering consultancy firm located in
                <strong>Surat, Gujarat State</strong>. It was established in
                <strong>September 2013</strong>.
              </p>

              <p>
                <strong>DDS Engineering (INDIA) Private Limited</strong> was incorporated in
                <strong>June 2021</strong> to strengthen and expand engineering capabilities.
              </p>

              <p>
                DDS is well-recognized for its dedicated services to the
                <strong>Polyester Industry</strong>
                <span class="text-muted">(CP, POY / FDY / PSF, DTY and Extruder Spinning)</span>.
              </p>

              <p>
                DDS is made up of professionally qualified technical personnel who have served
                world-class synthetic polyester filament yarn and polymerization plants for
                over <strong>25 years</strong>.
              </p>

              <p>
                DDS provides engineering services in the areas of
                <strong>
                  PROCESS, PIPING, MECHANICAL and ELECTRICAL &amp; INSTRUMENTATION Engineering
                </strong>.
                Our team has extensive experience in Engineering, Project Management,
                and Shop Floor execution.
              </p>

              <p>
                DDS offers complete solutions as an
                Engineering Design Contractor,
                covering product selection, technology selection, plant engineering,
                execution and start-up, detail design, and OSBL engineering.
              </p>

              <p>
                Additional key deliverables include plant design, optimisation,
                modifications, energy-saving solutions, product improvement,
                process audits, operating procedure improvements,
                and utility revamping.
              </p>

              <p>
                DDS has expertise with global technologies including
                <strong>
                  DuPont–Chemtex CPs, Zimmer, CTIEI, Huitong, Polytex, Joyou,
                  and John Brown
                </strong>.
              </p>

              <p class="fw-bold text-success mt-3">
                ISO 9001:2015 and ISO 14001:2015 Certified Company
              </p>

              <p class="fw-bold mb-2 mt-3">Core Engineering Services</p>
              <ul class="mb-0">
                <li>PROCESS</li>
                <li>PIPING</li>
                <li>MECHANICAL</li>
                <li>ELECTRICAL &amp; INSTRUMENTATION</li>
              </ul>
            </div>
          </div>

          <!-- ✅ CONTACT SECTION -->
          <div class="ic-panel mt-3">
            <div class="ic-panel-title mb-2">Contact Us</div>

            <div class="row g-2">
              <div class="col-12">
                <input id="cName" class="form-control form-control-lg" placeholder="Your Name">
              </div>
              <div class="col-12">
                <input id="cPhone" class="form-control form-control-lg" placeholder="Mobile Number">
              </div>
              <div class="col-12">
                <input id="cEmail" class="form-control form-control-lg" placeholder="Email Address">
              </div>
              <div class="col-12">
                <textarea id="cMsg" class="form-control form-control-lg" rows="4" placeholder="Message / Query"></textarea>
              </div>
              <div class="col-12">
                <button id="btnSend" class="btn btn-primary btn-lg w-100 fw-bold" type="button">
                  <i class="bi bi-send-fill me-2"></i> Send
                </button>
              </div>
            </div>
          </div>

        </div><!-- /ic-body -->
      </section><!-- /ic-card -->

    </div><!-- /ic-center -->
  </div><!-- /container -->
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // ===== Employee loader (employees.json) =====
  const $ = (id) => document.getElementById(id);

  function qp(key){
    const u = new URL(window.location.href);
    return (u.searchParams.get(key) || "").trim();
  }
  function telClean(n){ return (n || "").replace(/\s+/g,""); }
  function waNumber(n){ return telClean(n).replace("+",""); }

  function setSafeHref(a, href){
    if(!a) return;
    a.href = href || "#";
    if(!href || href === "#") a.classList.add("ic-disabled");
    else a.classList.remove("ic-disabled");
  }

  function normalizeUrl(url){
    url = (url || "").trim();
    if(!url) return "";
    if(/^https?:\/\//i.test(url)) return url;
    return "https://" + url;
  }

  async function load(){
    const id = qp("id") || "ankit";

    const res = await fetch("employees.json", { cache: "no-store" });
    if(!res.ok) throw new Error("employees.json not found. HTTP " + res.status);

    const list = await res.json();
    const emp = list.find(x => (x.id || "").toLowerCase() === id.toLowerCase());

    if(!emp){
      $("name").textContent = "Employee not found";
      $("designation").textContent = `id="${id}" not in employees.json`;
      $("photo").src = "https://via.placeholder.com/240?text=No+Photo";
      return;
    }

    // ✅ photo path
    $("photo").src = emp.photo || "https://via.placeholder.com/240?text=Photo";
    $("name").textContent = emp.name || "—";
    $("designation").textContent = emp.designation || "—";

    // ✅ Map link
    const mapQ = encodeURIComponent(emp.mapQuery || emp.address || "");
    const mapHref = mapQ ? `https://maps.google.com/?q=${mapQ}` : "#";

    // ✅ Floating icon actions
    setSafeHref($("btnCall"), emp.phone ? `tel:${telClean(emp.phone)}` : "#");
    setSafeHref($("btnEmail"), emp.email ? `mailto:${emp.email}` : "#");
    setSafeHref($("btnWa"), emp.whatsapp ? `https://wa.me/${waNumber(emp.whatsapp)}` : "#");
    setSafeHref($("btnMap"), mapHref);

    // ✅ Contact Details block (text + links)
    const phoneText = emp.phone || "—";
    const emailText = emp.email || "—";
    const webText   = emp.website || emp.web || "";
    const addrText  = emp.address || emp.mapQuery || "—";

    $("dPhone").textContent   = phoneText;
    $("dEmail").textContent   = emailText;
    $("dWebsite").textContent = webText ? webText : "—";
    $("dAddress").textContent = addrText;

    setSafeHref($("aPhone"), emp.phone ? `tel:${telClean(emp.phone)}` : "#");
    setSafeHref($("aEmail"), emp.email ? `mailto:${emp.email}` : "#");
    setSafeHref($("aWeb"), webText ? normalizeUrl(webText) : "#");
    setSafeHref($("aLoc"), mapHref);
  }

  // Contact form (static)
  const COMPANY_EMAIL = "info@ddsengineering.in";
  const COMPANY_WA = "919727148654";

  function val(id){ return document.getElementById(id).value.trim(); }

  document.addEventListener("DOMContentLoaded", () => {
    load().catch((err) => {
      console.error(err);
      $("name").textContent = "Profile unavailable";
      $("designation").textContent = err.message || "Please try again later";
      $("photo").src = "https://via.placeholder.com/240?text=No+Photo";
    });

    $("btnSend").addEventListener("click", (e) => {
      e.preventDefault();

      const name  = val("cName");
      const phone = val("cPhone");
      const email = val("cEmail");
      const msg   = val("cMsg");

      if (!name || !phone || !msg) {
        alert("Please fill: Name, Mobile Number, and Message.");
        return;
      }

      const subject = "Contact Request - DDS Engineering Solutions LLP";
      const body =
`Name: ${name}
Mobile: ${phone}
Email: ${email}

Message:
${msg}`;

      const mailto =
        `mailto:${COMPANY_EMAIL}` +
        `?subject=${encodeURIComponent(subject)}` +
        `&body=${encodeURIComponent(body)}`;

      window.location.href = mailto;

      const waText = `${subject}\n\n${body}`;
      const waUrl  = `https://wa.me/${COMPANY_WA}?text=${encodeURIComponent(waText)}`;

      setTimeout(() => {
        window.open(waUrl, "_blank", "noopener,noreferrer");
      }, 200);
    });
  });
</script>

</body>
</html>
