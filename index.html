<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DDS iCard</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

  <!-- Pro CSS -->
  <link rel="stylesheet" href="pro.css" />
</head>

<body>

<!-- Top Bar -->
<header class="ic-topbar sticky-top">
  <div class="container d-flex align-items-center justify-content-between py-2">
    <div class="d-flex align-items-center gap-2">
      <span class="ic-dot"></span>
      <div class="fw-bold">DDS iCard</div>
    </div>

    <a class="btn btn-sm btn-outline-light" target="_blank" rel="noopener" href="https://ddsengineering.in">
      <i class="bi bi-globe2 me-1"></i> Website
    </a>
  </div>
</header>

<main class="ic-main">
  <div class="container">
    <div class="ic-center">

      <!-- Card -->
      <section class="ic-card shadow-lg border-0">

        <!-- Hero -->
        <div class="ic-hero">
          <div class="ic-hero-inner">
            <div class="ic-avatar">
              <img id="photo" src="" alt="Profile Photo">
            </div>

            <div class="ic-title">
              <h1 id="name" class="ic-name">Loading…</h1>
              <div id="designation" class="ic-role">—</div>

              <div class="ic-badges">
                <span id="txtCompanyBadge" class="badge rounded-pill text-bg-light border">—</span>
                <span class="badge rounded-pill text-bg-primary">Verified</span>
              </div>
            </div>
          </div>

          <!-- Quick Action Buttons -->
          <div class="ic-actions">
            <a id="btnCall" class="ic-action" href="#">
              <i class="bi bi-telephone-fill"></i><span>Call</span>
            </a>
            <a id="btnEmail" class="ic-action" href="#">
              <i class="bi bi-envelope-fill"></i><span>Email</span>
            </a>
            <a id="btnWa" class="ic-action" href="#" target="_blank" rel="noopener">
              <i class="bi bi-whatsapp"></i><span>WhatsApp</span>
            </a>
            <a id="btnMap" class="ic-action" href="#" target="_blank" rel="noopener">
              <i class="bi bi-geo-alt-fill"></i><span>Map</span>
            </a>
          </div>
        </div>

        <!-- Body -->
        <div class="ic-body">

          <!-- Info grid -->
          <div class="ic-info">

            <a id="rowPhone" class="ic-row" href="#">
              <div class="ic-ico"><i class="bi bi-telephone-fill"></i></div>
              <div class="ic-text">
                <div class="ic-label">Phone</div>
                <div id="txtPhoneText" class="ic-value">—</div>
              </div>
              <i class="bi bi-chevron-right ic-chev"></i>
            </a>

            <a id="rowEmail" class="ic-row" href="#">
              <div class="ic-ico"><i class="bi bi-envelope-fill"></i></div>
              <div class="ic-text">
                <div class="ic-label">Email</div>
                <div id="txtEmailText" class="ic-value">—</div>
              </div>
              <i class="bi bi-chevron-right ic-chev"></i>
            </a>

            <a id="rowWeb" class="ic-row" href="#" target="_blank" rel="noopener">
              <div class="ic-ico"><i class="bi bi-globe2"></i></div>
              <div class="ic-text">
                <div class="ic-label">Website</div>
                <div id="txtWebsiteText" class="ic-value">—</div>
              </div>
              <i class="bi bi-box-arrow-up-right ic-chev"></i>
            </a>

            <a id="rowAddr" class="ic-row" href="#" target="_blank" rel="noopener">
              <div class="ic-ico"><i class="bi bi-geo-alt-fill"></i></div>
              <div class="ic-text">
                <div class="ic-label">Location</div>
                <div id="txtAddressText" class="ic-value">—</div>
                <div class="ic-hint">Opens Google Maps</div>
              </div>
              <i class="bi bi-box-arrow-up-right ic-chev"></i>
            </a>

          </div>

          <!-- ================= ABOUT SECTION ================= -->
          <div class="ic-panel mt-3">
            <div class="d-flex justify-content-between align-items-start gap-2">
              <div>
                <div class="ic-panel-title">DDS Engineering Solutions LLP</div>
                <div class="ic-panel-sub">Engineering • Consultancy • Execution</div>
              </div>
              <span class="badge rounded-pill text-bg-primary">Est. 2021</span>
            </div>

            <div class="ic-panel-text mt-3">
              <p>
                <b>DDS Engineering Solutions LLP (DDS)</b> is a multi-dimensional technical and
                detailed engineering consultancy firm located in <b>Surat, Gujarat, India</b>.
                The organization was originally established in <b>September 2013</b>.
              </p>

              <p>
                <b>DDS Engineering (INDIA) Private Limited</b> was incorporated in
                <b>June 2021</b> to expand its engineering capabilities.
              </p>

              <p>
                DDS is well-recognized for services to the <b>Polyester Industry</b>
                (CP, POY/FDY/PSF, DTY &amp; Extruder Spinning).
              </p>

              <p>
                Our team has over <b>25 years of experience</b> serving world-class
                polymerization and filament yarn plants.
              </p>

              <p class="fw-bold mb-1">Core Engineering Services:</p>
              <ul class="mb-3">
                <li>PROCESS Engineering</li>
                <li>PIPING Engineering</li>
                <li>MECHANICAL Engineering</li>
                <li>ELECTRICAL &amp; INSTRUMENTATION Engineering</li>
              </ul>

              <p>
                DDS offers end-to-end solutions including plant engineering, execution,
                commissioning, OSBL design, energy optimization and audits.
              </p>

              <p>
                Expertise with global technologies:
                <b>DuPont–Chemtex, Zimmer, CTIEI, Huitong, Polytex, Joyou, John Brown</b>.
              </p>

              <p class="fw-bold text-success mb-0">
                ISO 9001:2015 &amp; ISO 14001:2015 Certified Company
              </p>
            </div>

            <div class="d-grid mt-3">
              <a class="btn btn-outline-primary" target="_blank" rel="noopener"
                 href="https://ddsengineering.in">
                <i class="bi bi-globe2 me-1"></i> Visit Company Website
              </a>
            </div>
          </div>

          <!-- ================= CONTACT SECTION ================= -->
          <div class="ic-panel mt-3">
            <div class="ic-panel-title mb-2">Contact Us</div>
            <div class="ic-panel-sub mb-3">
              This opens your Email / WhatsApp with pre-filled details.
            </div>

            <div class="row g-2">
              <div class="col-12">
                <input id="cName" class="form-control form-control-lg" placeholder="Your Name">
              </div>
              <div class="col-12">
                <input id="cPhone" class="form-control form-control-lg" placeholder="Mobile Number">
              </div>
              <div class="col-12">
                <input id="cEmail" class="form-control form-control-lg" placeholder="Email Address">
              </div>
              <div class="col-12">
                <textarea id="cMsg" class="form-control form-control-lg" rows="4"
                  placeholder="Message / Query"></textarea>
              </div>
              <div class="col-12">
                <button id="btnSend" class="btn btn-primary btn-lg w-100 fw-bold" type="button">
                  <i class="bi bi-send-fill me-2"></i> Send
                </button>
              </div>
            </div>

            <div class="d-flex gap-2 mt-3 flex-wrap">
              <a class="btn btn-outline-secondary flex-fill"
                 href="mailto:info@ddsengineering.in">
                <i class="bi bi-envelope me-1"></i> info@ddsengineering.in
              </a>

              <a class="btn btn-outline-success flex-fill"
                 target="_blank" rel="noopener"
                 href="https://wa.me/919727148654">
                <i class="bi bi-whatsapp me-1"></i> WhatsApp
              </a>
            </div>
          </div>

        </div><!-- /ic-body -->
      </section><!-- /ic-card -->

    </div><!-- /ic-center -->
  </div><!-- /container -->
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // ===== Employee loader (employees.json) =====
  const $ = (id) => document.getElementById(id);

  function qp(key){
    const u = new URL(window.location.href);
    return (u.searchParams.get(key) || "").trim();
  }
  function telClean(n){ return (n || "").replace(/\s+/g,""); }
  function waNumber(n){ return telClean(n).replace("+",""); }

  function setSafeHref(a, href){
    a.href = href || "#";
    if(!href || href === "#") a.classList.add("ic-disabled");
    else a.classList.remove("ic-disabled");
  }

  async function load(){
    const id = qp("id") || "ankit";

    const res = await fetch("employees.json", { cache: "no-store" });
    const list = await res.json();

    const emp = list.find(x => (x.id || "").toLowerCase() === id.toLowerCase());

    if(!emp){
      $("name").textContent = "Employee not found";
      $("designation").textContent = `id="${id}" not in employees.json`;
      $("photo").src = "https://via.placeholder.com/240?text=No+Photo";
      return;
    }

    $("photo").src = emp.photo || "https://via.placeholder.com/240?text=Photo";
    $("name").textContent = emp.name || "—";
    $("designation").textContent = emp.designation || "—";
    $("txtCompanyBadge").textContent = emp.company || "DDS Engineering";

    const mapQ = encodeURIComponent(emp.mapQuery || emp.address || "");
    const mapHref = mapQ ? `https://maps.google.com/?q=${mapQ}` : "#";

    // Quick actions
    setSafeHref($("btnCall"), emp.phone ? `tel:${telClean(emp.phone)}` : "#");
    setSafeHref($("btnEmail"), emp.email ? `mailto:${emp.email}` : "#");
    setSafeHref($("btnWa"), emp.whatsapp ? `https://wa.me/${waNumber(emp.whatsapp)}` : "#");
    setSafeHref($("btnMap"), mapHref);

    // Rows
    setSafeHref($("rowPhone"), emp.phone ? `tel:${telClean(emp.phone)}` : "#");
    $("txtPhoneText").textContent = emp.phone || "—";

    setSafeHref($("rowEmail"), emp.email ? `mailto:${emp.email}` : "#");
    $("txtEmailText").textContent = emp.email || "—";

    const site = emp.website || "";
    const siteText = site ? site.replace(/^https?:\/\//,"") : "—";
    setSafeHref($("rowWeb"), site || "#");
    $("txtWebsiteText").textContent = siteText;

    setSafeHref($("rowAddr"), mapHref);
    $("txtAddressText").textContent = emp.address || "—";
  }

  // Contact form (static)
  const COMPANY_EMAIL = "info@ddsengineering.in";
  const COMPANY_WA = "919727148654";

  function val(id){ return document.getElementById(id).value.trim(); }

  document.addEventListener("DOMContentLoaded", () => {
    load().catch(() => {
      $("name").textContent = "Error loading employees.json";
      $("designation").textContent = "Run using Live Server / localhost";
    });

$("btnSend").addEventListener("click", (e) => {
  e.preventDefault();

  const name  = val("cName");
  const phone = val("cPhone");
  const email = val("cEmail");
  const msg   = val("cMsg");

  // ✅ Basic validation
  if (!name || !phone || !msg) {
    alert("Please fill: Name, Mobile Number, and Message.");
    return;
  }

  const subject = "Contact Request - DDS Engineering Solutions LLP";
  const body =
`Name: ${name}
Mobile: ${phone}
Email: ${email}

Message:
${msg}`;

  // ✅ Correct mailto creation
  const mailto =
    `mailto:${COMPANY_EMAIL}` +
    `?subject=${encodeURIComponent(subject)}` +
    `&body=${encodeURIComponent(body)}`;

  // ✅ Open email (works if default mail client exists)
  window.location.href = mailto;

  // ✅ Optional WhatsApp (some browsers block popups)
  const waText = `${subject}\n\n${body}`;
  const waUrl  = `https://wa.me/${COMPANY_WA}?text=${encodeURIComponent(waText)}`;

  // try open WA after small delay (reduces popup-block issues)
  setTimeout(() => {
    window.open(waUrl, "_blank", "noopener,noreferrer");
  }, 200);
});

});
</script>

</body>
</html>
