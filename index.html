<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>iCard</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>

<main class="app">
  <div class="phone">

    <header class="hero">
      <div class="hero-inner">
        <div class="avatar-wrap">
          <img id="photo" class="avatar" src="" alt="Profile Photo"/>
        </div>
        <h1 id="name" class="name">Loading‚Ä¶</h1>
        <p id="designation" class="role">‚Äî</p>
      </div>

      <!-- Floating Buttons -->
      <div class="fab-row">
        <a id="btnCall" class="fab" href="#" aria-label="Call">
          <svg viewBox="0 0 24 24" class="ico">
            <path d="M6.6 10.8c1.5 3.1 3.5 5.1 6.6 6.6l2.2-2.2c.3-.3.8-.4 1.2-.2 1 .3 2.1.5 3.2.5.7 0 1.2.5 1.2 1.2V21c0 .7-.5 1.2-1.2 1.2C9.4 22.2 1.8 14.6 1.8 5.4 1.8 4.7 2.3 4.2 3 4.2h3.8c.7 0 1.2.5 1.2 1.2 0 1.1.2 2.2.5 3.2.1.4 0 .9-.2 1.2L6.6 10.8z"/>
          </svg>
        </a>

        <a id="btnEmail" class="fab" href="#" aria-label="Email">
          <svg viewBox="0 0 24 24" class="ico">
            <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5L4 8V6l8 5 8-5v2z"/>
          </svg>
        </a>

        <a id="btnWa" class="fab" href="#" target="_blank" aria-label="WhatsApp">
          <svg viewBox="0 0 24 24" class="ico">
            <path d="M20.5 3.5A10 10 0 0 0 3.4 18.7L2 22l3.4-1.3A10 10 0 0 0 22 12a10 10 0 0 0-1.5-8.5ZM12 20a8 8 0 0 1-4-1.1l-.3-.2-2 .8.7-2-.2-.3A8 8 0 1 1 20 12a8 8 0 0 1-8 8Z"/>
          </svg>
        </a>

        <a id="btnMap" class="fab" href="#" target="_blank" aria-label="Location">
          <svg viewBox="0 0 24 24" class="ico">
            <path d="M12 2c-3.9 0-7 3.1-7 7 0 5.2 7 13 7 13s7-7.8 7-13c0-3.9-3.1-7-7-7zm0 9.5c-1.4 0-2.5-1.1-2.5-2.5S10.6 6.5 12 6.5s2.5 1.1 2.5 2.5S13.4 11.5 12 11.5z"/>
          </svg>
        </a>
      </div>
    </header>

    <section class="sheet">
      <div class="info-card">

        <div class="row">
          <div class="row-ico">
            <svg viewBox="0 0 24 24" class="mini">
              <path d="M6.6 10.8c1.5 3.1 3.5 5.1 6.6 6.6l2.2-2.2c.3-.3.8-.4 1.2-.2 1 .3 2.1.5 3.2.5.7 0 1.2.5 1.2 1.2V21c0 .7-.5 1.2-1.2 1.2C9.4 22.2 1.8 14.6 1.8 5.4 1.8 4.7 2.3 4.2 3 4.2h3.8c.7 0 1.2.5 1.2 1.2 0 1.1.2 2.2.5 3.2.1.4 0 .9-.2 1.2L6.6 10.8z"/>
            </svg>
          </div>
          <div class="row-text">
            <div class="label">Phone</div>
            <a id="txtPhone" class="value" href="#"></a>
          </div>
        </div>

        <div class="row">
          <div class="row-ico">
            <svg viewBox="0 0 24 24" class="mini">
              <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5L4 8V6l8 5 8-5v2z"/>
            </svg>
          </div>
          <div class="row-text">
            <div class="label">Email</div>
            <a id="txtEmail" class="value" href="#"></a>
          </div>
        </div>

        <div class="row">
          <div class="row-ico">
            <svg viewBox="0 0 24 24" class="mini">
              <path d="M12 2a10 10 0 100 20 10 10 0 000-20z"/>
            </svg>
          </div>
          <div class="row-text">
            <div class="label">Website</div>
            <a id="txtWebsite" class="value" href="#" target="_blank"></a>
          </div>
        </div>

        <div class="row">
          <div class="row-ico">
            <svg viewBox="0 0 24 24" class="mini">
              <path d="M12 2c-3.9 0-7 3.1-7 7 0 5.2 7 13 7 13s7-7.8 7-13c0-3.9-3.1-7-7-7z"/>
            </svg>
          </div>
          <div class="row-text">
            <div class="label">Location</div>
            <a id="txtAddress" class="value" href="#" target="_blank"></a>
            <a id="btnShowMap" class="map-btn" href="#" target="_blank">Show on Map</a>
          </div>
        </div>

      </div>

      <div class="company-block">
        <div id="txtCompany" class="small-muted">‚Äî</div>
        <div id="txtBigRole" class="big">‚Äî</div>
      </div>
    </section>

  </div>
</main>

<script>
  const $ = (id) => document.getElementById(id);

  function qp(key){
    const u = new URL(window.location.href);
    return (u.searchParams.get(key) || "").trim();
  }
  function telClean(n){ return (n || "").replace(/\s+/g,""); }
  function waNumber(n){ return telClean(n).replace("+",""); }

  function setLink(el, href, text){
    el.href = href;
    el.textContent = text || "‚Äî";
  }

  async function load(){
    const id = qp("id") || "ankit";

    const res = await fetch("employees.json", { cache: "no-store" });
    const list = await res.json();
    const emp = list.find(x => (x.id || "").toLowerCase() === id.toLowerCase());

    if(!emp){
      $("name").textContent = "Employee not found";
      $("designation").textContent = `id="${id}" not in employees.json`;
      $("photo").src = "https://via.placeholder.com/200?text=No+Photo";
      return;
    }

    $("photo").src = emp.photo || "https://via.placeholder.com/200?text=Photo";
    $("name").textContent = emp.name || "‚Äî";
    $("designation").textContent = emp.designation || "‚Äî";

    $("btnCall").href = emp.phone ? `tel:${telClean(emp.phone)}` : "#";
    $("btnEmail").href = emp.email ? `mailto:${emp.email}` : "#";
    $("btnWa").href = emp.whatsapp ? `https://wa.me/${waNumber(emp.whatsapp)}` : "#";

    const mapQ = encodeURIComponent(emp.mapQuery || emp.address || "");
    const mapHref = mapQ ? `https://maps.google.com/?q=${mapQ}` : "#";
    $("btnMap").href = mapHref;

    setLink($("txtPhone"), emp.phone ? `tel:${telClean(emp.phone)}` : "#", emp.phone || "‚Äî");
    setLink($("txtEmail"), emp.email ? `mailto:${emp.email}` : "#", emp.email || "‚Äî");

    const site = emp.website || "";
    setLink($("txtWebsite"), site || "#", site ? site.replace(/^https?:\/\//,"") : "‚Äî");

    setLink($("txtAddress"), mapHref, emp.address || "‚Äî");
    $("btnShowMap").href = mapHref;

    $("txtCompany").textContent = emp.company || "‚Äî";
    $("txtBigRole").textContent = emp.designation || "‚Äî";
  }

  load().catch(() => {
    $("name").textContent = "Error loading employees.json";
    $("designation").textContent = "Run using Live Server / localhost";
  });
</script>


<!-- ===== FIXED CONTACT FOOTER ===== -->
<footer class="contact-footer">
  <a href="mailto:info@ddsengineering.in" class="cf-item">
    ‚úâÔ∏è <span>Contact Us</span>
  </a>

  <a href="https://wa.me/919727148654" target="_blank" class="cf-item">
    üí¨ <span>WhatsApp</span>
  </a>

  <a href="tel:+919727148654" class="cf-item">
    üìû <span>Call</span>
  </a>
</footer>

</body>


</html>
